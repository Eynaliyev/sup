<menu-button></menu-button>
<!--
<ion-content class="chat" delegate-handle="chatScroll">
	<div class="message-list">
		<div ng-repeat="message in chat.messages" class="message-wrapper">
			<div class="message" ng-class="message.userId === $root.currentUser._id ? 'message-mine' : 'message-other'">
				<ng-switch on="message.type">
					<div ng-switch-when="text" class="text">{{ message.text }}</div>
					<div ng-switch-when="picture" class="picture">
						<img ng-src="{{ message.picture }}">
					</div>
				</ng-switch>
				<span class="message-timestamp">{{ message.timestamp | amDateFormat: 'HH:mm' }}</span>
			</div>
		</div>
	</div>
</ion-content>
<ion-footer-bar keyboard-attach class="bar-stable footer-chat item-input-inset">
	<button class="button button-clear button-icon button-positive icon ion-ios-upload-outline"></button>

	<label class="item-input-wrapper">
		<input ng-model="chat.message" dir="auto" type="text" on-return="chat.sendMessage(); chat.closeKeyboard()" on-focus="chat.inputUp()"
		  on-blur="chat.inputDown()" />
	</label>

	<span ng-if="chat.message.length > 0">
		<button ng-click="chat.sendMessage()" class="button button-clear button-positive">Send</button>
	</span>
	<span ng-if="!chat.message || chat.message.length === 0">
		<button ng-click="chat.sendPicture()" class="button button-clear button-icon button-positive icon ion-ios-camera-outline"></button>
		<i class="buttons-seperator icon ion-android-more-vertical"></i>
		<button class="button button-clear button-icon button-positive icon ion-ios-mic-outline"></button>
	</span>
</ion-footer-bar>-->

<ion-content>
	<ion-scroll scrollY="true" class="messages">
		<ion-fab top center>
			<button ion-fab (click)="openParticipantsList()" color="primary" class="menu-btn-border">
				<ion-icon name="people"></ion-icon>
			</button>
		</ion-fab>
		<ion-fab right top>
			<button ion-fab (click)="exit()" color="primary" class="menu-btn-border">
				<ion-icon name="exit"></ion-icon>
			</button>
		</ion-fab>
		<ion-list no-lines style="padding-top: 21px;">
			<ion-item *ngFor="let msg of messages">
				<chat-bubble [message]="msg" (select)="goToUser($event)"></chat-bubble>
			</ion-item>
		</ion-list>
		<ion-refresher (ionRefresh)="doRefresh($event)">
			<ion-refresher-content pullingText="Load more messages" refreshingText="Loading...">
				></ion-refresher-content>
		</ion-refresher>
	</ion-scroll>
</ion-content>
<ion-footer keyboard-attach>
	<ion-toolbar class="no-border" color="white">
		<ion-buttons start>
			<button ion-button>
				<ion-icon name="camera" color="primary"></ion-icon>
			</button>
		</ion-buttons>
		<ion-input [(ngModel)]="newMessage.content" placeholder="Write your message"></ion-input>
		<ion-buttons end>
			<button ion-button (click)="sendMessage()">
				<ion-icon name="send" color="primary"></ion-icon>
			</button>
		</ion-buttons>
	</ion-toolbar>
</ion-footer>
